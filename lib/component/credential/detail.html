<div class='row'>
  <div class='col-lg'>
    <ma-card>
      <h2>Credentials for {{domain}}</h2>
      <p class='lead'>
        The crawler uses credentials to authenticate itself.
      </p>
      <div *ngIf='domainLogin != null'>
        <ma-input-group [inline]='true'>
          <label class='metadata-labels'>Login URL</label>
          <input type='text'
                 [(ngModel)]='domainLogin.loginUrl'
                 placeholder='Login URL'>
        </ma-input-group>
        <h4>Users</h4>
        <p>
          The crawler will pick a user at random and try to authenticate with
          that password.
        </p>
        <table class='striped'>
          <thead>
            <th>Username</th>
            <th>Password</th>
            <th>&nbsp;</th>
          </thead>
          <tbody>
            <tr *ngIf="domainLogin.users.length==0">
              <td class='empty-table' colspan="999">
                There are no users for this domain.
              </td>
            </tr>
            <tr *ngFor='let user of domainLogin.users; let index=index'>
              <td>{{user.username}}</td>
              <td>●●●●●●●●</td>
              <td>
                <ma-button type='danger'
                           size='small'
                           (click)='deleteUser($event, index)'>
                  <fa name='trash'></fa> Delete
                </ma-button>
                <p *ngIf='error != null' class='error'>{{error}}</p>
              </td>
            </tr>
            <tr *ngIf='showAddUser'>
              <td>
                <input #username type='text' placeholder='New User'>
              </td>
              <td>
                <input #password type='password' placeholder='Password'>
              </td>
              <td>
                <ma-button type='success' size='small' (click)='addUser($event, username, password)'>
                  <fa name='save'></fa>
                  Save
                </ma-button>
                <ma-button type='warning' size='small' (click)='showAddUser=false'>
                  <fa name='ban'></fa>
                  Cancel
                </ma-button>
                <p *ngIf='error != null' class='error'>{{error}}</p>
              </td>
            </tr>
          </tbody>
        </table>
        <p>
          <ma-button type='success' (click)='showAddUser=true'>
            <fa name='plus-circle'></fa>
            Add user…
          </ma-button>
        </p>
      </div>
    </ma-card>
  </div>
</div>
